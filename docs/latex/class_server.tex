\hypertarget{class_server}{}\doxysection{Server Class Reference}
\label{class_server}\index{Server@{Server}}


{\ttfamily \#include $<$Server.\+hpp$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_server_ad5ec9462b520e59f7ea831e157ee5e59}{Server}} ()
\item 
\mbox{\hyperlink{class_server_a6183c4c7661a4bc4e4c3ecfff2a5874a}{Server}} (std\+::string block)
\item 
\mbox{\hyperlink{class_server_aa3dfa83b87b36934d00907dfd1ca81cb}{Server}} (const \mbox{\hyperlink{class_server}{Server}} \&server)
\item 
\mbox{\hyperlink{class_server_a4b3aa2579cb1c8cd1d069582c14d0fa6}{$\sim$\+Server}} ()
\item 
\mbox{\hyperlink{class_server}{Server}} \& \mbox{\hyperlink{class_server_a33ec649318654c84af2fb3a75f363ae0}{operator=}} (const \mbox{\hyperlink{class_server}{Server}} \&server)
\item 
pthread\+\_\+t \mbox{\hyperlink{class_server_a5ef1fcca261e2b0eeae2086dc312675a}{get\+Thread}} (void)
\item 
int \mbox{\hyperlink{class_server_a228e9412c741ab91d8db584a62e63ecb}{get\+Port}} (void)
\item 
void \mbox{\hyperlink{class_server_abb27d30b40a94326e3fd629d3b30b7d5}{run}} ()
\item 
void \mbox{\hyperlink{class_server_a57b525899914e178a65276ca1339a64a}{threading}} (void)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{_server_8hpp_source_l00036}{36}} of file \mbox{\hyperlink{_server_8hpp_source}{Server.\+hpp}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_server_ad5ec9462b520e59f7ea831e157ee5e59}\label{class_server_ad5ec9462b520e59f7ea831e157ee5e59}} 
\index{Server@{Server}!Server@{Server}}
\index{Server@{Server}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{Server()}{Server()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily Server\+::\+Server (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_server_8cpp_source_l00003}{3}} of file \mbox{\hyperlink{_server_8cpp_source}{Server.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00004\ \{}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_server_a6183c4c7661a4bc4e4c3ecfff2a5874a}\label{class_server_a6183c4c7661a4bc4e4c3ecfff2a5874a}} 
\index{Server@{Server}!Server@{Server}}
\index{Server@{Server}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{Server()}{Server()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily Server\+::\+Server (\begin{DoxyParamCaption}\item[{std\+::string}]{block }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_server_8cpp_source_l00008}{8}} of file \mbox{\hyperlink{_server_8cpp_source}{Server.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00009\ \{}
\DoxyCodeLine{00010\ \ \ \ \ \_server\_block\ =\ \mbox{\hyperlink{class_server_block}{ServerBlock}}(block);}
\DoxyCodeLine{00011\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_server_aa3dfa83b87b36934d00907dfd1ca81cb}\label{class_server_aa3dfa83b87b36934d00907dfd1ca81cb}} 
\index{Server@{Server}!Server@{Server}}
\index{Server@{Server}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{Server()}{Server()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily Server\+::\+Server (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_server}{Server}} \&}]{server }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_server_8cpp_source_l00014}{14}} of file \mbox{\hyperlink{_server_8cpp_source}{Server.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00015\ \{}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{this}\ ==\ \&server)}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ return\ ;}
\DoxyCodeLine{00018\ \ \ \ \ \_s\_thread\ =\ server.\_s\_thread;}
\DoxyCodeLine{00019\ \ \ \ \ \_server\_socket\ =\ server.\_server\_socket;}
\DoxyCodeLine{00020\ \ \ \ \ \_server\_addr\ =\ server.\_server\_addr;}
\DoxyCodeLine{00021\ \ \ \ \ \_change\_list\ =\ server.\_change\_list;}
\DoxyCodeLine{00022\ \ \ \ \ \_curr\_event\ =\ server.\_curr\_event;}
\DoxyCodeLine{00023\ \ \ \ \ \_clients\ =\ server.\_clients;}
\DoxyCodeLine{00024\ \ \ \ \ \_kqueue\ =\ server.\_kqueue;}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 8;\ i++)}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \_event\_list[i]\ =\ server.\_event\_list[i];}
\DoxyCodeLine{00027\ \ \ \ \ \_server\_block\ =\ server.\_server\_block;}
\DoxyCodeLine{00028\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_server_a4b3aa2579cb1c8cd1d069582c14d0fa6}\label{class_server_a4b3aa2579cb1c8cd1d069582c14d0fa6}} 
\index{Server@{Server}!````~Server@{$\sim$Server}}
\index{````~Server@{$\sim$Server}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{$\sim$Server()}{~Server()}}
{\footnotesize\ttfamily Server\+::$\sim$\+Server (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_server_8cpp_source_l00030}{30}} of file \mbox{\hyperlink{_server_8cpp_source}{Server.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00031\ \{}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_server_a228e9412c741ab91d8db584a62e63ecb}\label{class_server_a228e9412c741ab91d8db584a62e63ecb}} 
\index{Server@{Server}!getPort@{getPort}}
\index{getPort@{getPort}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{getPort()}{getPort()}}
{\footnotesize\ttfamily int Server\+::get\+Port (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_server_8cpp_source_l00207}{207}} of file \mbox{\hyperlink{_server_8cpp_source}{Server.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00208\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{return}\ (\_server\_block.\mbox{\hyperlink{class_block_a600e63dd526de11efcbd2396ceb0dbdd}{getPort}}());}
\DoxyCodeLine{00210\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_server_a5ef1fcca261e2b0eeae2086dc312675a}\label{class_server_a5ef1fcca261e2b0eeae2086dc312675a}} 
\index{Server@{Server}!getThread@{getThread}}
\index{getThread@{getThread}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{getThread()}{getThread()}}
{\footnotesize\ttfamily pthread\+\_\+t Server\+::get\+Thread (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_server_8cpp_source_l00202}{202}} of file \mbox{\hyperlink{_server_8cpp_source}{Server.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00203\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keywordflow}{return}\ (\_s\_thread);}
\DoxyCodeLine{00205\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_server_a33ec649318654c84af2fb3a75f363ae0}\label{class_server_a33ec649318654c84af2fb3a75f363ae0}} 
\index{Server@{Server}!operator=@{operator=}}
\index{operator=@{operator=}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_server}{Server}} \& Server\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_server}{Server}} \&}]{server }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_server_8cpp_source_l00035}{35}} of file \mbox{\hyperlink{_server_8cpp_source}{Server.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00036\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{this}\ ==\ \&server)}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (*\textcolor{keyword}{this});}
\DoxyCodeLine{00039\ \ \ \ \ \_s\_thread\ =\ server.\_s\_thread;}
\DoxyCodeLine{00040\ \ \ \ \ \_server\_socket\ =\ server.\_server\_socket;}
\DoxyCodeLine{00041\ \ \ \ \ \_server\_addr\ =\ server.\_server\_addr;}
\DoxyCodeLine{00042\ \ \ \ \ \_change\_list\ =\ server.\_change\_list;}
\DoxyCodeLine{00043\ \ \ \ \ \_curr\_event\ =\ server.\_curr\_event;}
\DoxyCodeLine{00044\ \ \ \ \ \_clients\ =\ server.\_clients;}
\DoxyCodeLine{00045\ \ \ \ \ \_kqueue\ =\ server.\_kqueue;}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 8;\ i++)}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \_event\_list[i]\ =\ server.\_event\_list[i];}
\DoxyCodeLine{00048\ \ \ \ \ \_server\_block\ =\ server.\_server\_block;}
\DoxyCodeLine{00049\ \ \ \ \ return\ (*\textcolor{keyword}{this});}
\DoxyCodeLine{00050\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_server_abb27d30b40a94326e3fd629d3b30b7d5}\label{class_server_abb27d30b40a94326e3fd629d3b30b7d5}} 
\index{Server@{Server}!run@{run}}
\index{run@{run}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily void Server\+::run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_server_8cpp_source_l00148}{148}} of file \mbox{\hyperlink{_server_8cpp_source}{Server.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00149\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{comment}{/*\ init\ server\ socket\ and\ listen\ */}}
\DoxyCodeLine{00151\ \ \ \ \ std::cout\ <<\ \_server\_block.\mbox{\hyperlink{class_block_a600e63dd526de11efcbd2396ceb0dbdd}{getPort}}()\ <<\ std::endl;}
\DoxyCodeLine{00152\ \ \ \ \ socket\_init(\_server\_block.\mbox{\hyperlink{class_block_a600e63dd526de11efcbd2396ceb0dbdd}{getPort}}(),\ \_server\_block.\mbox{\hyperlink{class_block_a2494a5326173eb8e1953b0a569fcdc1b}{getAddr}}());}
\DoxyCodeLine{00153\ \ \ \ \ fcntl(\_server\_socket,\ F\_SETFL,\ O\_NONBLOCK);}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{comment}{/*\ init\ kqueue\ */}}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\_kqueue\ =\ kqueue())\ ==\ -\/1)}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{comment}{/*\ add\ event\ for\ server\ socket\ */}}
\DoxyCodeLine{00160\ \ \ \ \ change\_events(\_server\_socket,\ EVFILT\_READ,\ EV\_ADD\ |\ EV\_ENABLE,\ 0,\ 0,\ NULL);}
\DoxyCodeLine{00161\ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}server\ started"{}}\ <<\ std::endl;}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{comment}{/*\ main\ loop\ */}}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keywordtype}{int}\ new\_events;}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordflow}{while}\ (1)}
\DoxyCodeLine{00166\ \ \ \ \ \{}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ apply\ changes\ and\ return\ new\ events(pending\ events)\ */}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ new\_events\ =\ kevent(\_kqueue,\ \&\_change\_list[0],\ \_change\_list.size(),\ \_event\_list,\ 8,\ NULL);}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (new\_events\ ==\ -\/1)}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \_change\_list.clear();\ \textcolor{comment}{//\ clear\ change\_list\ for\ new\ changes}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ new\_events;\ ++i)}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \_curr\_event\ =\ \&\_event\_list[i];}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ check\ error\ event\ return\ */}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_curr\_event-\/>flags\ \&\ EV\_ERROR)}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_curr\_event-\/>ident\ ==\ (uintptr\_t)\_server\_socket)}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}client\ socket\ error"{}}\ <<\ std::endl;}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disconnect\_client(\_curr\_event-\/>ident,\ \_clients);}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_curr\_event-\/>filter\ ==\ EVFILT\_READ)}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_curr\_event-\/>ident\ ==\ (uintptr\_t)\_server\_socket)}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ accept\_new\_client();}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_clients.find(\_curr\_event-\/>ident)\ !=\ \_clients.end())}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ receiveMessage();}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_curr\_event-\/>filter\ ==\ EVFILT\_WRITE)}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sendMessage();}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00199\ \ \ \ \ \}}
\DoxyCodeLine{00200\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_server_a57b525899914e178a65276ca1339a64a}\label{class_server_a57b525899914e178a65276ca1339a64a}} 
\index{Server@{Server}!threading@{threading}}
\index{threading@{threading}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{threading()}{threading()}}
{\footnotesize\ttfamily void Server\+::threading (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_server_8cpp_source_l00219}{219}} of file \mbox{\hyperlink{_server_8cpp_source}{Server.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00220\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keywordtype}{int}\ tid\ =\ pthread\_create(\&\_s\_thread,\ NULL,\ Server::threadFunction,\ (\textcolor{keywordtype}{void}*)\textcolor{keyword}{this});}
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keywordflow}{if}\ (tid\ <\ 0)}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00224\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
webserve/\+Server/\mbox{\hyperlink{_server_8hpp}{Server.\+hpp}}\item 
webserve/\+Server/\mbox{\hyperlink{_server_8cpp}{Server.\+cpp}}\end{DoxyCompactItemize}
